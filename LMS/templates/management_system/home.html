{% extends "base_generic.html" %}
{% load static %}

{% block title %}<title>Vilgax Library</title>{%  endblock  %}

{% block content %}
  <style>
  .home--grid{
    display: grid;
    grid-template-columns:0.5fr 3fr;
    background-color:white;
  }



  .books--grid--top--image{
    height: 333px;
    width: 1250px;
  }

  .books--grid h2{
    margin-left:10px;
    margin-top:70px;
  }


  .library--status{
    height: 70px;
    width: 400px;
    background-color:#FFFFFF;
    color:#1E5288;
    margin:-200px 00px 0px 0px;
    position: relative;

    z-index: 0;
    padding:5px;
  }

  .library--status h3{
    font-family: Sora;
    font-size: 20px;
    font-weight: 700;
    line-height: 48px;
    text-align: left;
    margin-top:-15px;
    margin-left: 30px;
  }

  .status_dud{
     height: 12px;
     width: 12px;
     margin-left: 30px;
     margin-top:-10px;
  }

  #create_book_image {
    height: 40px;
    width: 40px;
    margin-top: -90px;
    position:absolute;
    left:350px;



  }

  #create_book_image:hover {
    cursor:pointer;

  }

  .library--status p{
    font-family: Sora;
    font-size: 17px;
    font-weight: 400;
    line-height: 27px;
    font-family: Sora;
    text-align: left;
    {% if is_open %}
      color:#3D7500;
    {% else %}
      color:red;
    {% endif %}
    margin: -22px 0px 25px 48px;


  }


  .library--search--appointment{
      display:grid;
      grid-template-columns:2fr 1fr;
      margin:130px 0px;
  }

  .library--search{
      height:220px;
      background-color: #0C234B;


  }

  .library--search form{
      position:relative;

  }

  .library--search h3{
      height: 41px;
      width: 234px;
      font-family: Sora;
      font-size: 32px;
      font-weight: 600;
      line-height: 40px;
      letter-spacing: 0em;
      text-align: left;
      color:white;
      margin-left:25px;

  }

  .library--search input[type=text]{
      height: 60px;
      width: 800px;
      border-radius:8px;
      margin-top: 10px;
      margin-left:22px;
  }


   .library--search button{
      height:30px;
      float: right;
      margin: -40px 90px 0px 0px;
      background-color: #790417;
      color: #FFFFFF;
      padding:5px;
      border-radius:5px;
      z-index:1000;
      position: absolute;
      top: 68px;
      right: -40px;
      z-index: 1000;
      cursor:pointer;
  }


  .library--appointment{
      width: 387px;
      margin-left: 10px;
  }

  .working--hours{
    margin:5px;
    background-color:#E2E9EB;
    padding:10px;

  }

  .working--hours h3{
    height: 30px;
    width: 168px;
    font-family: Sora;
    font-size: 24px;
    font-weight: 600;
    line-height: 30px;
    text-align: left;
    color: #001C48;
  }

  .first--p{
    height: 20px;
    width: 116px;
    font-family: Sora;
    font-size: 16px;
    font-weight: 300;
    line-height: 15px;
    text-align: left;
    color:#001C48;
  }

  .second--p{
      height: 19px;
      width: 240px;
      font-family: Milo OT;
      font-size: 16px;
      font-weight: 400;
      line-height: 20px;
      text-align: left;
      color:#333333;
  }


  .library--appointment button{
    background-color:#790417;
    height: 30px;
    width: 180px;
    margin: 5px;
    color:white;
    border: 1px solid #790417;
  }

  .library--appointment span{
      font-family: Sora;
      font-size: 12px;
      font-weight: 400;
      line-height: 15px;
      text-align: left;
  }

  .super--books--container{
     display:grid;
     grid-template-columns:0.5fr 0.5fr 0.5fr 0.5fr 0.5fr;
     column-gap: 5px;
     row-gap:20px;
  }


  .book--container{
     height: 300px;
     width:215px;
     border-radius: 10px;
     padding:5px;
  }

  .book--container a:hover{
     cursor:pointer
  }


   .book--container img{
      height:200px;
      width:200px;
      padding:10px;
      border-radius:25px;
   }


   .book--container p{
      font-family: Sora;
      font-size: 17px;
      font-weight: 600;
      line-height: 30px;
      text-align: left;
      display: flex;
      justify-content:center;
      align-items:center;
      margin-top: 0px;
   }


   .book--container span{
        color:white;
   }

   .book--container button{
      margin-left:7px;
      margin-bottom:3px;
      background-color: #FD5252;
      height: 26px;
      width: 200px;
      border:1px solid #FD5252;
      border-radius:5px;
      cursor:pointer;
   }

</style>


  <div class="home--grid">

  {% include 'genre_component.html' %}

  <div class="books--grid">

    {% include 'navbar.html' %}

    <img src="{% static 'images/container.png' %}" alt="Vilgax Library"  class="books--grid--top--image">

    <div class="library--status">
      <h3>Vilgax Library</h3>
      {% if is_open %}
      <img src="{% static 'images/img_2.png' %}" alt="Now Open" class="status_dud">
      <p>Open Now</p>
      {% else %}
      <img src="{% static 'images/img_13.png' %}" alt="Currently Closed" class="status_dud">
      <p>Currently Closed</p>
      {% endif %}

        {% if request.user.is_authenticated and request.user.is_staff %}
        <a href="{% url 'management_system:add_book' %}"><img src="{% static 'images/img_12.png' %}" alt="create_book" id="create_book_image"></a>
        {% endif %}
    </div>

    <div class="library--search--appointment">
      <div class="library--search">

        <h3>Library Search</h3>

        <form action="" method="GET" >
        <input type="text" name="search" placeholder="Enter the author, title or genre">
          <button type="submit">Search</button>
          </form>


      </div>


      <div class="library--appointment">
        <div class="working--hours">
          <h3>Today's Hours</h3>

          <p class="first--p">Library access<span>{%if is_open %} currently open {% else %} Currently Closed {% endif %}</span></p>
          <p class="second--p">Opens at {{open_time}}, Closes at {{close_time}}</p>
        </div>

        <button type="submit" class="appointment--study-room"><span>Book a study room</span></button>
        <button type="submit" class="appointment--tutor"><span>Find a Tutor</span></button>

      </div>




    </div>




    <h2>Books available ({{books.count}}) </h2>

    <div class="super--books--container">
          {% for book in books %}
            {% if book.quantity_available > 0 %}
              <div class="book--container">
             <a href="{% url 'management_system:book_detail' book.bookID %}" >
            <img src="{{book.thumbnail.url}}" alt="{{book}}">
                  </a>
            <p>{{book.title|truncatechars:20}}</p>
<!--            <a href="{% url 'management_system:edit_book_details' book.bookID %}">Edit book</a>-->
<!--            <a href="{% url 'management_system:delete_book' book.bookID %}">Delete book</a>-->
            {% if request.user.is_authenticated %}
            {% if book.bookID not in members_book_request %}
                  <a href="{% url 'management_system:book_request' book.bookID %}"><button><span>Request Book</span></button></a>
                  {% else %}
                  <a href="{% url 'management_system:book_request' book.bookID %}"><button style="background-color:#AB0520;"><span>Requested</span></button></a>
            {% endif %}
                  {% endif %}
          </div>
            {% endif %}
          {% empty %}
              <div class="book--container">
            <p>No Book available at the moment</p>
          </div>
          {% endfor %}
    </div>


    <h2>Popular Books </h2>

    <div class="super--books--container">
          {% for book in popular_books %}
          <div class="book--container">
              <a href="{% url 'management_system:book_detail' book.bookID %}" >
            <img src="{{book.thumbnail.url}}" alt="{{book}}">
                  </a>
            <p>{{book.title|truncatechars:20}}</p>

<!--            <a href="{% url 'management_system:edit_book_details' book.bookID %}">Edit book</a>-->
<!--            <a href="{% url 'management_system:delete_book' book.bookID %}">Delete book</a>-->
            {% if request.user.is_authenticated %}
            {% if book.bookID not in members_book_request %}
              <a href="{% url 'management_system:book_request' book.bookID %}"><button><span>Request Book</span></button></a>
              {% else %}
              <a href="{% url 'management_system:book_request' book.bookID %}"><button style="background-color:#AB0520;"><span>Requested</span></button></a>
            {% endif %}
              {% endif %}
          </div>
          {% empty %}
          <div class="book--container">
            <p>No Book available at the moment</p>
          </div>
          {% endfor %}
    </div>

        {% include "footer.html" %}

  </div>




</div>

<!--<div class="create_book">-->

<!--    <h3>Create Book</h3>-->

<!--    <form action="{% url 'management_system:add_book' %}" method="POST">-->
<!--    {% csrf_token %}-->


<!--    <label>Title</label>-->
<!--    <br>-->
<!--    {{form.title}}-->
<!--    <br>-->
<!--    <br>-->

<!--    <label>Genre</label>-->
<!--    <br>-->
<!--    {{form.genre}}-->
<!--    <br>-->
<!--    <br>-->

<!--    <label>Authors</label>-->
<!--    <br>-->
<!--    {{form.authors}}-->
<!--    <br>-->
<!--    <br>-->

<!--    <label>Thumbnail</label>-->
<!--    <br>-->
<!--    {{form.thumbnail}}-->
<!--    <br>-->
<!--    <br>-->

<!--    <label>Descripton</label>-->
<!--    <br>-->
<!--    {{form.description}}-->
<!--    <br>-->
<!--    <br>-->

<!--    <label>ISBN13</label>-->
<!--    <br>-->
<!--    {{form.isbn13}}-->
<!--    <br>-->
<!--    <br>-->

<!--    <br>-->
<!--    <input type="submit" value="Create Book">-->
<!--</form>-->


<!--    <p id="create_book_home"><a href="{% url 'management_system:home' %}">-->
<!--        <img id='create_book_home_img' src="{% static 'images/img_1.png'%}" alt="Sign In">Back To HomePage</a></p>-->

<!--</div>-->


<!--<div class="import_api_data">-->

<!--  <h3>Import API Data</h3>-->

<!--    <form action="" method="POST" enctype="multipart/form-data">-->
<!--  {% csrf_token %}-->
<!--  <label>Name</label>-->
<!--  <br>-->
<!--  {{api_form.name}}-->
<!--  <br>-->
<!--  <br>-->

<!--  <label>Number Of Books</label>-->
<!--  <br>-->
<!--  {{api_form.number_of_books}}-->
<!--  <br>-->
<!--  <br>-->

<!--  <label>Api Link</label>-->
<!--  <br>-->
<!--  {{api_form.api_link}}-->
<!--  <br>-->
<!--  <br>-->


<!--  <input type="submit" value="Import">-->
<!--</form>-->

<!--    <p id="import_books"><a href="">-->
<!--        <img id='import_books_image_img' src="{% static 'images/img_1.png'%}" alt="Sign In">Back To HomePage</a></p>-->

<!--</div>-->

<script>

     document.querySelector("#create_book_image").addEventListener("click", function(){

        document.querySelector(".create_book").classList.add("active");

    });


    document.querySelector("#create_book_home_img").addEventListener("click", function(){

        document.querySelector(".create_book").classList.remove("active");

    });

    console.log("running")
     document.querySelector("#import_api_data_nav").addEventListener("click", function(){

        document.querySelector(".import_api_data").classList.remove("active");

    });
 console.log("running")
    document.querySelector("#import_books_image_img").addEventListener("click", function(){

        document.querySelector(".import_api_data").classList.remove("active");

    });



</script>
{% endblock %}




